<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A&M INTERNATIONAL ENGINEERING PTE LTD</title>
    <style>
        /* 重置所有可能影响下拉列表显示的样式 */
        * {
            box-sizing: border-box;
        }
        
        /* Header 样式 */
        header {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background-color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            background-image: url('Image/24.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            z-index: 1;
        }

        /* 导航栏样式 */
        nav {
            display: flex;
            align-items: center;
            background-color: #2980b9;
            padding: 10px 20px;
            flex-wrap: nowrap;
            white-space: nowrap;
            position: relative;
            z-index: 1; /* 设置较低的z-index，确保不干扰下拉列表 */
            overflow: visible !important; /* 强制覆盖可能的溢出限制 */
        }

        /* 导航链接容器 */
        .nav-links {
            display: flex;
            align-items: center;
            flex-wrap: nowrap;
            white-space: nowrap;
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            flex: 1;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 10px 15px;
            margin: 0 5px;
            border-radius: 4px;
            transition: background-color 0.3s;
            white-space: nowrap;
            flex-shrink: 0;
        }

        nav a:hover {
            background-color: #dcedc1;
            color: #2c3e50;
        }

        /* 搜索容器样式 - 关键修改 */
        .search-container {
            display: flex;
            align-items: center;
            background: white;
            border-radius: 25px;
            padding: 2px;
            border: 1px solid #ccc;
            position: relative;
            margin-left: auto;
            flex-shrink: 0;
            overflow: visible !important; /* 强制可见 */
            z-index: 1000; /* 确保搜索容器本身也有较高的z-index */
        }

        .search-input {
            border: none;
            outline: none;
            padding: 8px 15px;
            border-radius: 25px;
            width: 200px;
            font-size: 14px;
            background: transparent;
        }

        /* 搜索下拉列表样式 - 关键修改 */
        .search-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-height: 300px;
            overflow-y: auto;
            z-index: 10000 !important; /* 使用!important确保优先级 */
            display: none;
            /* 确保下拉列表不会被任何父元素裁剪 */
            transform: translateZ(0); /* 创建新的层叠上下文 */
        }

        .search-result-item {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .search-result-item:hover {
            background-color: #f8f9fa;
        }

        .search-result-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }

        .search-result-content {
            color: #666;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .search-result-url {
            color: #00b4d8;
            font-size: 0.8em;
            margin-top: 4px;
        }

        .no-results {
            padding: 15px;
            text-align: center;
            color: #666;
        }

        .google-search-link {
            display: block;
            padding: 10px 15px;
            background: #f8f9fa;
            color: #00b4d8;
            text-decoration: none;
            text-align: center;
            border-top: 1px solid #e9ecef;
            font-weight: bold;
        }

        .search-loading {
            padding: 10px;
            text-align: center;
            color: #666;
            font-style: italic;
        }

        /* 公司logo和标题样式 */
        header img {
            height: 60px;
            margin-right: 15px;
        }

        header h1 {
            margin: 0;
            color: white;
            font-size: 24px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        header p {
            margin: 5px 0 0;
            color: white;
            font-size: 14px;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
        }

        /* 响应式设计 */
        @media (max-width: 1024px) {
            header h1 { font-size: 18px !important; line-height: 1.2; }
            header p { font-size: 12px !important; }
            nav { padding: 8px 15px; }
            .nav-links { padding-bottom: 5px; }
            nav a { font-size: 14px; padding: 8px 12px; }
            .search-input { width: 150px; font-size: 14px; }
        }

        @media (max-width: 1024px) and (orientation: landscape) {
            nav { padding: 5px 0; }
            nav a { font-size: 13px; padding: 6px 10px; }
            header h1 { font-size: 16px !important; }
            header p { font-size: 11px !important; }
            .search-input { width: 120px; font-size: 13px; }
            header { padding: 5px 15px; }
            header img { height: 40px; }
        }

        @media (max-width: 768px) and (orientation: landscape) {
            nav a { font-size: 12px; padding: 5px 8px; }
            header h1 { font-size: 14px !important; }
            header p { font-size: 10px !important; }
            .search-input { width: 100px; font-size: 12px; }
        }
        
        /* 小屏幕设备优化 */
        @media (max-width: 768px) {
            .nav-links {
                overflow-x: auto;
                overflow-y: hidden;
                -webkit-overflow-scrolling: touch;
                padding-bottom: 5px;
            }
            
            .nav-links::-webkit-scrollbar {
                height: 5px;
            }
            
            .nav-links::-webkit-scrollbar-track {
                background: rgba(255,255,255,0.1);
                border-radius: 10px;
            }
            
            .nav-links::-webkit-scrollbar-thumb {
                background: rgba(255,255,255,0.3);
                border-radius: 10px;
            }
            
            /* 在小屏幕上确保搜索下拉列表有足够宽度 */
            .search-dropdown {
                width: 300px !important;
                left: -50px !important;
                right: auto !important;
            }
        }
    </style>
</head>
<body>
    <header>
        <img src="Image/logo.png" alt="Company Logo">
        <div>
            <h1>A&M INTERNATIONAL ENGINEERING PTE LTD</h1>
            <p>A professional integration solution provider</p>
        </div>   
    </header>
    
    <nav>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="about.html">About Us</a>
            <a href="Solutions.html">Solutions</a>
            <a href="services.html">Products & Services</a>
            <a href="projects.html">Projects</a>
            <a href="Support.html">Support</a>
            <a href="Libary.html">Library</a>
            <a href="contact.html">Contact Us</a>
        </div>
           
        <div class="search-container">
            <input type="text" id="search-input" placeholder="Search..." class="search-input" autocomplete="off">
            <div id="search-results-dropdown" class="search-dropdown"></div>
        </div>
    </nav>

    <script>
        // 搜索功能实现 - 完全独立，不依赖外部页面
        (function() {
            'use strict';
            
            // 页面数据 - 包含所有站内页面的信息
            const pages = [
                {
                    title: "Home",
                    content: "Welcome to A&M INTERNATIONAL ENGINEERING PTE LTD. We provide professional integration solutions for various industries including oil and gas, chemical, and manufacturing sectors.",
                    url: "index.html",
                    keywords: ["home", "welcome", "main", "start", "engineering", "solutions"]
                },
                {
                    title: "About Us",
                    content: "Learn more about A&M INTERNATIONAL ENGINEERING PTE LTD and our mission. We are a leading provider of engineering solutions with years of industry experience.",
                    url: "about.html",
                    keywords: ["about", "company", "mission", "team", "history", "experience"]
                },
                {
                    title: "Solutions",
                    content: "Our solutions include supply chain optimization, digital transformation, and operational risk management. We deliver comprehensive engineering solutions.",
                    url: "Solutions.html",
                    keywords: ["solutions", "supply chain", "digital", "transformation", "optimization", "risk management"]
                },
                {
                    title: "Products & Services",
                    content: "Explore our services including control, measurement, and project execution. We offer a wide range of engineering products and professional services.",
                    url: "services.html",
                    keywords: ["products", "services", "control", "measurement", "project", "execution", "engineering"]
                },
                {
                    title: "Projects",
                    content: "View our completed projects and case studies. See how we've helped clients achieve their engineering and operational goals.",
                    url: "projects.html",
                    keywords: ["projects", "case studies", "completed", "portfolio", "clients", "engineering projects"]
                },
                {
                    title: "Support",
                    content: "Access technical support, product finder, and customer portal. Our dedicated support team is here to help you.",
                    url: "Support.html",
                    keywords: ["support", "technical", "help", "customer", "portal", "finder", "assistance"]
                },
                {
                    title: "Library",
                    content: "Access documents, resources, videos and more. Our comprehensive library contains valuable engineering resources.",
                    url: "Libary.html",
                    keywords: ["library", "documents", "resources", "videos", "downloads", "engineering resources"]
                },
                {
                    title: "Contact Us",
                    content: "Reach out to us through our contact form or find our office location. We're here to answer your questions.",
                    url: "contact.html",
                    keywords: ["contact", "location", "email", "phone", "address", "reach us", "get in touch"]
                }
            ];

            // 搜索功能初始化
            function initSearch() {
                const searchInput = document.getElementById('search-input');
                const searchDropdown = document.getElementById('search-results-dropdown');
                
                if (!searchInput || !searchDropdown) {
                    console.warn('Search elements not found, skipping search initialization');
                    return;
                }

                let searchTimeout;

                // 显示加载状态
                const showLoading = () => {
                    searchDropdown.innerHTML = '<div class="search-loading">Searching...</div>';
                    searchDropdown.style.display = 'block';
                };
                
                // 显示搜索结果
                const showSearchResults = (results, query) => {
                    if (results.length === 0) {
                        searchDropdown.innerHTML = `
                            <div class="no-results">
                                <p>No results found for "<strong>${escapeHtml(query)}</strong>"</p>
                            </div>
                            <a href="https://www.google.com/search?q=${encodeURIComponent('A&M INTERNATIONAL ENGINEERING ' + query)}" 
                               target="_blank" class="google-search-link" id="google-search-link">
                               Search on Google for "${escapeHtml(query)}"
                            </a>
                        `;
                    } else {
                        searchDropdown.innerHTML = results.map(page => `
                            <div class="search-result-item" data-url="${page.url}">
                                <div class="search-result-title">${highlightMatch(page.title, query)}</div>
                                <div class="search-result-content">${highlightMatch(page.content.substring(0, 100) + '...', query)}</div>
                                <div class="search-result-url">${page.url}</div>
                            </div>
                        `).join('');
                    }
                    searchDropdown.style.display = 'block';
                };

                // 高亮匹配文本
                const highlightMatch = (text, query) => {
                    if (!query) return escapeHtml(text);
                    const regex = new RegExp(`(${escapeRegex(query)})`, 'gi');
                    return escapeHtml(text).replace(regex, '<mark>$1</mark>');
                };
                
                // 转义正则表达式
                const escapeRegex = (string) => {
                    return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                };

                // HTML转义
                const escapeHtml = (text) => {
                    const div = document.createElement('div');
                    div.textContent = text;
                    return div.innerHTML;
                };

                // 隐藏结果
                const hideSearchResults = () => {
                    searchDropdown.style.display = 'none';
                };

                // 搜索页面
                const searchPages = (query) => {
                    const lowerQuery = query.toLowerCase().trim();
                    if (lowerQuery.length < 2) return [];
                    
                    return pages.filter(page => {
                        if (page.title.toLowerCase().includes(lowerQuery)) return true;
                        if (page.content.toLowerCase().includes(lowerQuery)) return true;
                        if (page.keywords && page.keywords.some(keyword => 
                            keyword.toLowerCase().includes(lowerQuery))) return true;
                        return false;
                    }).sort((a, b) => {
                        const aTitleMatch = a.title.toLowerCase().includes(lowerQuery);
                        const bTitleMatch = b.title.toLowerCase().includes(lowerQuery);
                        if (aTitleMatch && !bTitleMatch) return -1;
                        if (!aTitleMatch && bTitleMatch) return 1;
                        return 0;
                    });
                };

                // 处理Enter键搜索
                const handleEnterSearch = (query) => {
                    const results = searchPages(query);
                    if (results.length > 0) {
                        // 如果有站内结果，跳转到第一个结果
                        window.location.href = results[0].url;
                    } else {
                        // 如果没有站内结果，跳转到Google搜索
                        window.open(`https://www.google.com/search?q=${encodeURIComponent('A&M INTERNATIONAL ENGINEERING ' + query)}`, '_blank');
                    }
                };

                // 实时搜索
                const handleRealTimeSearch = () => {
                    const query = searchInput.value.trim();
                    if (query.length < 2) {
                        hideSearchResults();
                        return;
                    }
                    
                    showLoading();
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(() => {
                        const results = searchPages(query);
                        showSearchResults(results, query);
                    }, 300);
                };

                // 事件绑定
                searchInput.addEventListener('input', handleRealTimeSearch);
                
                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        const query = searchInput.value.trim();
                        if (!query) {
                            alert('Please enter search keywords');
                            return;
                        }
                        
                        // 隐藏下拉列表
                        hideSearchResults();
                        
                        // 执行Enter键搜索
                        handleEnterSearch(query);
                    }
                });
                
                // 点击外部隐藏下拉框
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.search-container')) {
                        hideSearchResults();
                    }
                });
                
                // 点击搜索结果跳转
                searchDropdown.addEventListener('click', (e) => {
                    const resultItem = e.target.closest('.search-result-item');
                    const googleLink = e.target.closest('#google-search-link');
                    
                    if (resultItem) {
                        const url = resultItem.getAttribute('data-url');
                        window.location.href = url;
                    } else if (googleLink) {
                        // Google搜索链接已经在HTML中设置了target="_blank"，不需要额外处理
                        e.preventDefault();
                        window.open(googleLink.href, '_blank');
                    }
                });

                console.log('Search functionality initialized successfully');
            }

            // 页面加载完成后初始化搜索功能
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initSearch);
            } else {
                initSearch();
            }
        })();
    </script>
</body>
</html>
