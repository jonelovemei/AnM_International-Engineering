<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Library - A&M INTERNATIONAL ENGINEERING</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- 引用公用样式 -->
  <link rel="stylesheet" href="style.css">
  <!-- Library页面特定样式 -->
  <style>
    section#Library {
      max-width: 100%;
      margin: 40px auto 60px;
      padding: 0 20px;
    }

    .library-description h2 {
      font-size: 32px;
      color: white;
      margin-bottom: 40px;
      text-align: center;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .library-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      justify-items: stretch;
      align-items: stretch;
    }

    .library-item {
      background-color: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      transition: all 0.3s ease;
      padding: 25px;
      min-height: 180px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      border-left: 4px solid #00b4d8;
      position: relative;
      z-index: 0;
    }

    .library-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.3);
      z-index: -1;
    }

    .library-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      background-color: white;
    }

    .library-item .text {
      text-align: left;
      position: relative;
      z-index: 2;
      width: 100%;
    }

    .library-item .text h3 {
      font-size: 18px;
      color: #2e7d32;
      margin-bottom: 12px;
      font-weight: 600;
      line-height: 1.3;
    }

    .library-item .text p {
      font-size: 14px;
      color: #555;
      line-height: 1.5;
      margin: 0;
    }

    /* 电脑屏幕优化 - 确保平均满屏分布 */
    @media (min-width: 1200px) {
      .library-grid {
        grid-template-columns: repeat(4, 1fr);
        gap: 30px;
      }
      
      .library-item {
        min-height: 200px;
        padding: 30px;
      }
    }

    @media (min-width: 1600px) {
      .library-grid {
        grid-template-columns: repeat(5, 1fr);
        gap: 35px;
      }
      
      .library-item {
        min-height: 220px;
      }
    }

    /* 中等屏幕响应式设计 */
    @media (max-width: 1199px) and (min-width: 992px) {
      .library-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 25px;
      }
      
      .library-item {
        min-height: 190px;
        padding: 25px;
      }
    }

    @media (max-width: 991px) and (min-width: 768px) {
      .library-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
      }
      
      .library-item {
        min-height: 170px;
        padding: 20px;
      }
    }

    /* 平板和手机响应式设计 */
    @media (max-width: 767px) {
      .library-grid {
        grid-template-columns: 1fr;
        gap: 18px;
      }
      
      .library-item {
        min-height: 160px;
        padding: 18px;
      }
      
      .library-description h2 {
        font-size: 28px;
        margin-bottom: 30px;
      }
    }

    @media (max-width: 480px) {
      .library-item {
        min-height: 150px;
        padding: 15px;
      }
      
      .library-item .text h3 {
        font-size: 16px;
        margin-bottom: 10px;
      }
      
      .library-item .text p {
        font-size: 13px;
      }
      
      .library-description h2 {
        font-size: 24px;
        margin-bottom: 25px;
      }
    }

    /* iPad特殊处理 */
    @media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
      .library-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
      }
    }

    @media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
      .library-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
      }
    }
  </style>
</head>
<body>

  <!-- Header占位符 -->
  <div id="header-placeholder"></div>

  <script>
    // 加载header - 使用与index.html相同的代码
    fetch('header.html')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.text();
        })
        .then(data => {
            document.getElementById('header-placeholder').innerHTML = data;
            
            // 重新执行header中的脚本
            const scripts = document.getElementById('header-placeholder').getElementsByTagName('script');
            for (let script of scripts) {
                const newScript = document.createElement('script');
                if (script.src) {
                    newScript.src = script.src;
                } else {
                    newScript.textContent = script.textContent;
                }
                document.head.appendChild(newScript).remove();
            }
        })
        .catch(error => {
            console.error('Error loading header:', error);
            // 提供基本的header结构作为备用
            document.getElementById('header-placeholder').innerHTML = `
                <header>
                    <img src="Image/logo.png" alt="Company Logo">
                    <div>
                        <h1>A&M INTERNATIONAL ENGINEERING PTE LTD</h1>
                        <p>A professional integration solution provider</p>
                    </div>   
                </header>
                
                <nav>
                    <div class="nav-links">
                        <a href="index.html">Home</a>
                        <a href="about.html">About Us</a>
                        <a href="Solutions.html">Solutions</a>
                        <a href="services.html">Products & Services</a>
                        <a href="projects.html">Projects</a>
                        <a href="Support.html">Support</a>
                        <a href="Libary.html">Library</a>
                        <a href="contact.html">Contact Us</a>
                    </div>
                       
                    <div class="search-container">
                        <input type="text" id="search-input" placeholder="Search..." class="search-input" autocomplete="off">
                        <div id="search-results-dropdown" class="search-dropdown"></div>
                    </div>
                </nav>
            `;
            
            // 重新初始化搜索功能
            const newScript = document.createElement('script');
            newScript.textContent = `
                // 搜索功能实现 - 完全独立，不依赖外部页面
                (function() {
                    'use strict';
                    
                    // 页面数据 - 包含所有站内页面的信息
                    const pages = [
                        {
                            title: "Home",
                            content: "Welcome to A&M INTERNATIONAL ENGINEERING PTE LTD. We provide professional integration solutions for various industries including oil and gas, chemical, and manufacturing sectors.",
                            url: "index.html",
                            keywords: ["home", "welcome", "main", "start", "engineering", "solutions"]
                        },
                        {
                            title: "About Us",
                            content: "Learn more about A&M INTERNATIONAL ENGINEERING PTE LTD and our mission. We are a leading provider of engineering solutions with years of industry experience.",
                            url: "about.html",
                            keywords: ["about", "company", "mission", "team", "history", "experience"]
                        },
                        {
                            title: "Solutions",
                            content: "Our solutions include supply chain optimization, digital transformation, and operational risk management. We deliver comprehensive engineering solutions.",
                            url: "Solutions.html",
                            keywords: ["solutions", "supply chain", "digital", "transformation", "optimization", "risk management"]
                        },
                        {
                            title: "Products & Services",
                            content: "Explore our services including control, measurement, and project execution. We offer a wide range of engineering products and professional services.",
                            url: "services.html",
                            keywords: ["products", "services", "control", "measurement", "project", "execution", "engineering"]
                        },
                        {
                            title: "Projects",
                            content: "View our completed projects and case studies. See how we've helped clients achieve their engineering and operational goals.",
                            url: "projects.html",
                            keywords: ["projects", "case studies", "completed", "portfolio", "clients", "engineering projects"]
                        },
                        {
                            title: "Support",
                            content: "Access technical support, product finder, and customer portal. Our dedicated support team is here to help you.",
                            url: "Support.html",
                            keywords: ["support", "technical", "help", "customer", "portal", "finder", "assistance"]
                        },
                        {
                            title: "Library",
                            content: "Access documents, resources, videos and more. Our comprehensive library contains valuable engineering resources.",
                            url: "Libary.html",
                            keywords: ["library", "documents", "resources", "videos", "downloads", "engineering resources"]
                        },
                        {
                            title: "Contact Us",
                            content: "Reach out to us through our contact form or find our office location. We're here to answer your questions.",
                            url: "contact.html",
                            keywords: ["contact", "location", "email", "phone", "address", "reach us", "get in touch"]
                        }
                    ];

                    // 搜索功能初始化
                    function initSearch() {
                        const searchInput = document.getElementById('search-input');
                        const searchDropdown = document.getElementById('search-results-dropdown');
                        
                        if (!searchInput || !searchDropdown) {
                            console.warn('Search elements not found, skipping search initialization');
                            return;
                        }

                        let searchTimeout;

                        // 显示加载状态
                        const showLoading = () => {
                            searchDropdown.innerHTML = '<div class="search-loading">Searching...</div>';
                            searchDropdown.style.display = 'block';
                        };
                        
                        // 显示搜索结果
                        const showSearchResults = (results, query) => {
                            if (results.length === 0) {
                                searchDropdown.innerHTML = \`
                                    <div class="no-results">
                                        <p>No results found for "<strong>\${escapeHtml(query)}</strong>"</p>
                                    </div>
                                    <a href="https://www.google.com/search?q=\${encodeURIComponent('A&M INTERNATIONAL ENGINEERING ' + query)}" 
                                       target="_blank" class="google-search-link" id="google-search-link">
                                       Search on Google for "\${escapeHtml(query)}"
                                    </a>
                                \`;
                            } else {
                                searchDropdown.innerHTML = results.map(page => \`
                                    <div class="search-result-item" data-url="\${page.url}">
                                        <div class="search-result-title">\${highlightMatch(page.title, query)}</div>
                                        <div class="search-result-content">\${highlightMatch(page.content.substring(0, 100) + '...', query)}</div>
                                        <div class="search-result-url">\${page.url}</div>
                                    </div>
                                \`).join('');
                            }
                            searchDropdown.style.display = 'block';
                        };

                        // 高亮匹配文本
                        const highlightMatch = (text, query) => {
                            if (!query) return escapeHtml(text);
                            const regex = new RegExp(\`(\${escapeRegex(query)})\`, 'gi');
                            return escapeHtml(text).replace(regex, '<mark>$1</mark>');
                        };
                        
                        // 转义正则表达式
                        const escapeRegex = (string) => {
                            return string.replace(/[.*+?^\${}()|[\]\\\\]/g, '\\\\$&');
                        };

                        // HTML转义
                        const escapeHtml = (text) => {
                            const div = document.createElement('div');
                            div.textContent = text;
                            return div.innerHTML;
                        };

                        // 隐藏结果
                        const hideSearchResults = () => {
                            searchDropdown.style.display = 'none';
                        };

                        // 搜索页面
                        const searchPages = (query) => {
                            const lowerQuery = query.toLowerCase().trim();
                            if (lowerQuery.length < 2) return [];
                            
                            return pages.filter(page => {
                                if (page.title.toLowerCase().includes(lowerQuery)) return true;
                                if (page.content.toLowerCase().includes(lowerQuery)) return true;
                                if (page.keywords && page.keywords.some(keyword => 
                                    keyword.toLowerCase().includes(lowerQuery))) return true;
                                return false;
                            }).sort((a, b) => {
                                const aTitleMatch = a.title.toLowerCase().includes(lowerQuery);
                                const bTitleMatch = b.title.toLowerCase().includes(lowerQuery);
                                if (aTitleMatch && !bTitleMatch) return -1;
                                if (!aTitleMatch && bTitleMatch) return 1;
                                return 0;
                            });
                        };

                        // 处理Enter键搜索
                        const handleEnterSearch = (query) => {
                            const results = searchPages(query);
                            if (results.length > 0) {
                                // 如果有站内结果，跳转到第一个结果
                                window.location.href = results[0].url;
                            } else {
                                // 如果没有站内结果，跳转到Google搜索
                                window.open(\`https://www.google.com/search?q=\${encodeURIComponent('A&M INTERNATIONAL ENGINEERING ' + query)}\`, '_blank');
                            }
                        };

                        // 实时搜索
                        const handleRealTimeSearch = () => {
                            const query = searchInput.value.trim();
                            if (query.length < 2) {
                                hideSearchResults();
                                return;
                            }
                            
                            showLoading();
                            clearTimeout(searchTimeout);
                            searchTimeout = setTimeout(() => {
                                const results = searchPages(query);
                                showSearchResults(results, query);
                            }, 300);
                        };

                        // 事件绑定
                        searchInput.addEventListener('input', handleRealTimeSearch);
                        
                        searchInput.addEventListener('keydown', (e) => {
                            if (e.key === 'Enter') {
                                e.preventDefault();
                                const query = searchInput.value.trim();
                                if (!query) {
                                    alert('Please enter search keywords');
                                    return;
                                }
                                
                                // 隐藏下拉列表
                                hideSearchResults();
                                
                                // 执行Enter键搜索
                                handleEnterSearch(query);
                            }
                        });
                        
                        // 点击外部隐藏下拉框
                        document.addEventListener('click', (e) => {
                            if (!e.target.closest('.search-container')) {
                                hideSearchResults();
                            }
                        });
                        
                        // 点击搜索结果跳转
                        searchDropdown.addEventListener('click', (e) => {
                            const resultItem = e.target.closest('.search-result-item');
                            const googleLink = e.target.closest('#google-search-link');
                            
                            if (resultItem) {
                                const url = resultItem.getAttribute('data-url');
                                window.location.href = url;
                            } else if (googleLink) {
                                // Google搜索链接已经在HTML中设置了target="_blank"，不需要额外处理
                                e.preventDefault();
                                window.open(googleLink.href, '_blank');
                            }
                        });

                        console.log('Search functionality initialized successfully');
                    }

                    // 页面加载完成后初始化搜索功能
                    if (document.readyState === 'loading') {
                        document.addEventListener('DOMContentLoaded', initSearch);
                    } else {
                        initSearch();
                    }
                })();
            `;
            document.head.appendChild(newScript);
        });
  </script>

  <!-- Library Section -->
  <section id="Library">
    <div class="library-description">
      <h2>Our Engineering Library</h2>
      
      <div class="library-grid">
        <!-- 1 -->
        <div class="library-item">
          <div class="text">
            <h3>Supply Chain Optimization</h3>
            <p>Improving logistics, operations, and data integration across the supply chain for greater efficiency.</p>
          </div>
        </div>
        <!-- 2 -->
        <div class="library-item">
          <div class="text">
            <h3>Asset Operations and Optimization</h3>
            <p>Maximize asset performance and uptime through intelligent monitoring and control systems.</p>
          </div>
        </div>
        <!-- 3 -->
        <div class="library-item">
          <div class="text">
            <h3>Operational Risk Management</h3>
            <p>Identify, mitigate and monitor risks with integrated safety and compliance systems.</p>
          </div>
        </div>
        <!-- 4 -->
        <div class="library-item">
          <div class="text">
            <h3>Connected Intelligence</h3>
            <p>Leverage AI and IIoT to deliver predictive insights and smarter industrial decision-making.</p>
          </div>
        </div>
        <!-- 5 -->
        <div class="library-item">
          <div class="text">
            <h3>CCTV Energy Management Solution</h3>
            <p>Combine video analytics with energy monitoring for smart building and facility operations.</p>
          </div>
        </div>
        <!-- 6 -->
        <div class="library-item">
          <div class="text">
            <h3>Safety Case Regime</h3>
            <p>Ensure full lifecycle safety planning and compliance through structured safety case frameworks.</p>
          </div>
        </div>
        <!-- 7 -->
        <div class="library-item">
          <div class="text">
            <h3>SaaS & SaaP Solution</h3>
            <p>Flexible cloud and product-based platforms tailored to your industrial operation needs.</p>
          </div>
        </div>
        <!-- 8 -->
        <div class="library-item">
          <div class="text">
            <h3>Metering Solution</h3>
            <p>High-accuracy flow and energy measurement systems built for reliability and compliance.</p>
          </div>
        </div>
        <!-- 9 -->
        <div class="library-item">
          <div class="text">
            <h3>System Automation Solution</h3>
            <p>Design and deploy scalable automation systems with integrated real-time control and data.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
   <section class="footer-menu">
        <div class="footer-column">
            <h3>Solutions</h3>
            <ul>
                <li><a href="Solutions.html">Supply Chain Optimization</a></li>
                <li><a href="Solutions.html">Asset Operations and Optimization</a></li>
                <li><a href="Solutions.html">Operational Risk Management</a></li>
                <li><a href="Solutions.html">Connected Intelligence</a></li>
                <li><a href="Solutions.html">CCTV Energy Management Solution</a></li>
                <li><a href="Solutions.html">Safety Case Regime</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h3>Products & Services</h3>
            <ul>
                <li><a href="Solutions.html">Control</a></li>
                <li><a href="Solutions.html">Measurement</a></li>
                <li><a href="Solutions.html">Project Execution Services</a></li>
                <li><a href="Solutions.html">Digital Transformation</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h3>Library</h3>
            <ul>
                <li><a href="Libary.html">Documents & Downloads</a></li>
                <li><a href="Libary.html">Resources</a></li>
                <li><a href="Libary.html">Videos</a></li>
                <li><a href="Libary.html">Smart Manufacturing</a></li>
                <li><a href="Libary.html">Digital Transformation</a></li>
                <li><a href="Libary.html">Artificial Intelligence</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h3>Support</h3>
            <ul>
                <li><a href="Support.html">Technical Support</a></li>
                <li><a href="Support.html">Product Finder</a></li>
                <li><a href="Support.html">Customer Portal</a></li>
            </ul>
        </div>
    </section>
  <!-- Footer占位符 -->
  <div id="footer-placeholder"></div>
  
  <script>
    // 加载公用页脚
    fetch('footer.html')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.text();
        })
        .then(data => {
            document.getElementById('footer-placeholder').innerHTML = data;
        })
        .catch(error => {
            console.error('Error loading footer:', error);
            // 提供基本的footer结构作为备用
            document.getElementById('footer-placeholder').innerHTML = `
                <footer>
                    <p class="footer-text">&copy; 2025 A&M INTERNATIONAL ENGINEERING PTE LTD. ALL RIGHTS RESERVED.</p>
                </footer>
            `;
        });
  </script>

</body>
</html>
